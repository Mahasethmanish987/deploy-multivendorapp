{% extends 'myapp/base.html' %}
{% load static %}
{% block body %}
<!-- Main Section Start -->
<div class="main-section">
    <!-- ... (vendor profile section remains unchanged) ... -->
<div class="page-section restaurant-detail-image-section" style=" background: url({% if Vendor.user_profile.cover_photo %}{{Vendor.user_profile.cover_photo.url}}{% else %}{% static 'images/default-cover.PNG'%}{% endif %}) no-repeat scroll 0 0 / cover;">
        <!-- Container Start -->
        <div class="container">
            <!-- Row Start -->
            <div class="row">
                <!-- Column Start -->
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                    <div class="company-info-detail">
                        <div class="company-info">
                            <div class="img-holder">
                                <figure>
                                    <img src="{% if Vendor.user_profile.profile_picture%}{{Vendor.user_profile.profile_picture.url}}{% else %}{% static 'images/default-profile.PNG'%}{% endif %}" alt="">
                                </figure>
                            </div>
                            <div class="text-holder">
                                <span class="restaurant-title">{{Vendor.vendor_name}}{%  if  not Vendor.is_open %}[Closed]{% endif %}</span>
                                <div class="text">
                                    <i class="icon-local_pizza"></i>
                                    <p>{{Vendor.user_profile.address}}</p>
                                </div>
                            </div>
                        </div>
                        {% if opening_hours %}
                        <div class="delivery-timing reviews-sortby">
                            <ul>
                                <li>
                                    <a href="#" class="reviews-sortby-active">
                                        <span>Today :</span>
                                        {% for hour in current_opening_hours %}
                                       <span>{% if hour.is_closed %}Closed{% else %}{{ hour.from_hour }}--{{hour.to_hour}} {% endif %}</span> 
                                        
                                        {% endfor %}
                                        <i class="icon-chevron-small-down"></i>
                                    </a>
                                    <!-- Dropdown Menu -->
                                    <ul class="delivery-dropdown" >
                                        {% for opening_hour in opening_hours %}
                                        
                                            
                                               <li><a href=""><span class="opened_day">{{opening_hour}}</span><span class="opened_time"><small>:</small>{% if opening_hour.is_closed %}Closed{% else %}{{opening_hour.from_hour}}:{{opening_hour.to_hour}}{% endif %}</span></a></li>
                                            
                                        
                                        {% endfor %}
                                    </ul>
                                </li>
                            </ul>
                        </div>
                                                {% else %}
                        <p>No opening hours available.</p>
                        {% endif %}
                                                
                    </div>
                </div>
                <!-- Column End -->
            </div>
            <!-- Row End -->
        </div>
        <!-- Container End -->
    </div>
    <div class="page-section">
        <div class="container">
            <div class="row">
                <!-- Categories Sidebar (unchanged) -->

                <div class="col-lg-9 col-md-9 col-sm-8 col-xs-12">
                    <div class="tabs-holder horizontal">
                        <!-- Menu Tab Content -->
                        <div class="tab-content">
                            <div id="home" class="tab-pane in active">
                                <div class="menu-itam-holder">
                                    {% for category in categories %}
                                    <div class="element-title">
                                        <h5 class="text-color">{{category}}</h5>
                                        {% if category.description %}
                                        <p class="m-0 text-muted small">{{category.description}}</p>
                                        {% endif %}
                                    </div>
                                    <ul class="menu-items-list">
                                        {% for food in category.fooditem_set.all %}
                                        <li class="menu-item">
                                            <div class="row align-items-center g-3">
                                                <!-- Image Column -->
                                                <div class="col-4 col-md-3 col-lg-2">
                                                    <div class="image-holder ratio ratio-1x1">
                                                        <img src="{{food.image.url}}" alt="{{food}}"
                                                            class="img-cover rounded">
                                                    </div>
                                                </div>

                                                <!-- Text Column -->
                                                <div class="col-8 col-md-6 col-lg-7">
                                                    <div class="text-holder">
                                                        <h6 class="food-title mb-1">{{food}}</h6>
                                                        {% if food.description %}
                                                        <p class="food-description text-muted small mb-0">
                                                            {{food.description}}
                                                        </p>
                                                        {% endif %}
                                                    </div>
                                                </div>

                                                <!-- Price & Controls Column -->
                                                <div class="col-12 col-md-3 col-lg-3">
                                                    <div
                                                        class="price-controls d-flex align-items-center justify-content-between justify-content-md-end">
                                                        <span class="price me-3">Rs{{food.price}}</span>
                                                        <div class="quantity-controls d-flex align-items-center">
                                                            <a href="#"
                                                                class="btn btn-sm btn-outline-secondary decrease_cart"
                                                                data-id="{{food.id}}"
                                                                data-url="{% url 'marketplace:decrease_cart' food.food_slug %}">
                                                               <i class="fa fa-minus"></i>
                                                            </a>
                                                            <span id="qty-{{food.id}}" class="mx-2">0</span>
                                                            <a href="#"
                                                                class="btn btn-sm btn-outline-secondary increase_cart"
                                                                data-id="{{food.id}}"
                                                                data-url="{% url 'marketplace:increase_cart' food.food_slug %}">
                                                                <i class="fa fa-plus"></i>
                                                            </a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </li>
                                        {% endfor %}
                                    </ul>
                                    {% endfor %}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    /* Improved CSS */
    .menu-items-list {
        padding-left: 0;
        list-style: none;
    }

    .menu-item {
        padding: 1rem 0;
        border-bottom: 1px solid #dee2e6;
    }

    li.menu-item {
        list-style: none;
    }


    .image-holder {
        overflow: hidden;
        border-radius: 8px;
    }

    .img-cover {
        object-fit: cover;
        width: 100%;
        height: 100%;
    }

    .food-title {
        font-size: 1.1rem;
        font-weight: 500;
    }

    .food-description {
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }

    .price {
        font-weight: 600;
        color: #2a2a2a;
    }

    .quantity-controls .btn {
        padding: 0.25rem 0.6rem;
        line-height: 1;
    }

    @media (max-width: 768px) {
        .menu-item .row {
            --bs-gutter-x: 1rem;
            --bs-gutter-y: 0.5rem;
        }

        .price-controls {
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .food-title {
            font-size: 1rem;
        }

        .food-description {
            font-size: 0.8rem;
        }

        .image-holder {
            max-width: 80px;
        }
    }

    @media (max-width: 576px) {
        .menu-item {
            padding: 0.75rem 0;
        }

        .quantity-controls .btn {
            padding: 0.2rem 0.5rem;
        }

        .price {
            font-size: 0.9rem;
        }
    }
</style>
{% for cart_item in cart_items %}
<span id="qty-{{cart_item.fooditem.id}}" class="item_qty d-none"
    data-qty="{{cart_item.quantity}}">{{cart_item.quantity}}</span>

{% endfor %}
{% endblock %}